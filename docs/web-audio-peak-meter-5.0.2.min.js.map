{"version":3,"file":"web-audio-peak-meter-5.0.2.min.js","sources":["../src/config.ts","../src/utils.ts","../src/index.ts"],"sourcesContent":[null,null,null],"names":["defaultConfig","peakHoldDuration","peakCallbackDelay","dbFromFloat","floatVal","x","y","Math","log","constructor","srcNode","peakCallback","options","this","config","Object","assign","channelCount","tempPeaks","Array","fill","volume","Infinity","amplitude","heldPeaks","peakHoldIntervals","undefined","initNode","catch","err","console","error","async","context","state","node","AudioWorkletNode","parameterData","blob","Blob","type","objectURL","URL","createObjectURL","audioWorklet","addModule","port","onmessage","ev","handleNodePortMessage","connect","destination","invokeCallback","_a","call","getNormalizedCurrentPeakVolume","animationRequestId","requestAnimationFrame","intervalId","window","setInterval","warn","data","message","volumes","amplitudes","i","length","max","clearInterval","clearPeak","clearPeaks","getPeaks","current","maxes","currentDB","map","maxesDB","reduce","acc","peak","peakCallbackNormalizeVolume","dbRangeMin","dbRangeMax","normalizedRangeMin","normalizedRangeMax","normalizedRange","dbRange","min","cleanup","cancelAnimationFrame","disconnect"],"mappings":"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"}