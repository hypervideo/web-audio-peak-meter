{"version":3,"file":"web-audio-peak-meter-5.0.3.min.js","sources":["../src/config.ts","../src/utils.ts","../src/index.ts"],"sourcesContent":[null,null,null],"names":["defaultConfig","peakHoldDuration","peakCallbackDelay","dbFromFloat","floatVal","x","y","Math","log","constructor","srcNode","peakCallback","options","this","config","Object","assign","channelCount","tempPeaks","Array","fill","volume","Number","MAX_VALUE","amplitude","heldPeaks","peakHoldIntervals","undefined","initNode","catch","err","console","error","async","context","state","node","AudioWorkletNode","parameterData","blob","Blob","type","objectURL","URL","createObjectURL","audioWorklet","addModule","port","onmessage","ev","handleNodePortMessage","connect","destination","invokeCallback","_a","call","getNormalizedCurrentPeakVolume","animationRequestId","requestAnimationFrame","intervalId","window","setInterval","warn","data","message","volumes","amplitudes","i","length","max","clearInterval","clearPeak","clearPeaks","getPeaks","current","maxes","currentDB","map","maxesDB","reduce","acc","peak","peakCallbackNormalizeVolume","dbRangeMin","dbRangeMax","normalizedRangeMin","normalizedRangeMax","normalizedRange","dbRange","min","cleanup","cancelAnimationFrame","disconnect"],"mappings":"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"}